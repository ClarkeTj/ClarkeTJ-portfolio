<!--
MIT License
Game: Escape the Code (Game #2) â€” A three-stage mini escape: pattern memory, find-the-bug, and a knight-move micro maze.
Author: ChatGPT (GPT-5 Thinking) â€¢ Date: 2025-09-25 â€¢ File: index.html
Integration: Drop this folder into your portfolio (e.g., /games/escape-code/). This HTML links ./styles.css and ./script.js locally.
Works standalone. To embed from a parent site, see the integration snippet at the bottom of this file.
-->
<!DOCTYPE html>
<html lang="en" data-theme="">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Escape the Code</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <main id="ec-root" class="ec-wrap" aria-labelledby="ec-title">
    <header class="ec-header">
      <button class="ec-back" aria-label="Close or go back" title="Close">âœ•</button>
      <div class="ec-titles">
        <h1 id="ec-title">Escape the Code</h1>
        <p id="ec-narr">You're trapped in a dev room. Solve 3 puzzles to unlock the door.</p>
      </div>
      <div class="ec-indicators" aria-label="Progress">
        <span class="ec-dot" data-step="1" aria-label="Stage 1"></span>
        <span class="ec-dot" data-step="2" aria-label="Stage 2"></span>
        <span class="ec-dot" data-step="3" aria-label="Stage 3"></span>
      </div>
    </header>

    <section class="ec-hud" aria-label="Status">
      <div class="ec-stat"><strong>Time:</strong> <span id="ec-time">0.0</span>s</div>
      <div class="ec-stat"><strong>Mistakes:</strong> <span id="ec-mistakes">0</span></div>
      <div class="ec-stat"><strong>Best:</strong> <span id="ec-best">â€”</span></div>
    </section>

    <section class="ec-card" aria-live="polite">
      <!-- Stage containers (only one visible at a time) -->
      <div id="ec-stage1" class="ec-stage" aria-labelledby="ec-s1-title" hidden>
        <h2 id="ec-s1-title">Stage 1: Pattern Memory</h2>
        <p class="ec-help">Watch the pads flash. Repeat the sequence. Win 3 rounds.</p>
        <div class="ec-simon" role="group" aria-label="Pattern pads">
          <button class="ec-pad ec-pad0" data-pad="0" aria-label="Pad 1"></button>
          <button class="ec-pad ec-pad1" data-pad="1" aria-label="Pad 2"></button>
          <button class="ec-pad ec-pad2" data-pad="2" aria-label="Pad 3"></button>
          <button class="ec-pad ec-pad3" data-pad="3" aria-label="Pad 4"></button>
        </div>
        <div class="ec-s1-status"><span id="ec-s1-round">Round 1 / 3</span></div>
        <button id="ec-s1-start" class="ec-cta">Start Round</button>
      </div>

      <div id="ec-stage2" class="ec-stage" aria-labelledby="ec-s2-title" hidden>
        <h2 id="ec-s2-title">Stage 2: Find the Bug</h2>
        <p class="ec-help">Click the wrong token (or press 1,2,3). One is buggy.</p>
        <pre class="ec-code" aria-label="Code snippet"><code id="ec-codeblock"></code></pre>
        <div class="ec-options" role="group" aria-label="Token choices">
          <button class="ec-opt" data-i="0">1</button>
          <button class="ec-opt" data-i="1">2</button>
          <button class="ec-opt" data-i="2">3</button>
        </div>
        <div class="ec-s2-status"><span id="ec-s2-left">Puzzles left: 3</span></div>
        <button id="ec-s2-next" class="ec-cta" disabled>Next Puzzle</button>
      </div>

      <div id="ec-stage3" class="ec-stage" aria-labelledby="ec-s3-title" hidden>
        <h2 id="ec-s3-title">Stage 3: Knight Maze</h2>
        <p class="ec-help">Move like a chess knight. Reach the exit within the move limit.</p>
        <div class="ec-maze" role="grid" aria-label="5x5 maze grid" id="ec-maze"></div>
        <div class="ec-s3-status">
          <span>Moves: <strong id="ec-moves">0</strong>/<span id="ec-movecap">8</span></span>
          <span>Layout: <strong id="ec-layout">Easy</strong></span>
        </div>
        <div class="ec-maze-controls">
          <button id="ec-maze-prev" class="ec-ghost">â—€ Layout</button>
          <button id="ec-maze-restart" class="ec-ghost">Restart</button>
          <button id="ec-maze-next" class="ec-ghost">Layout â–¶</button>
        </div>
      </div>

      <div id="ec-complete" class="ec-complete" hidden>
        <h2>Door Unlocked!</h2>
        <p class="ec-scoreline"></p>
        <div class="ec-share">
          <button id="ec-copy" class="ec-cta">Copy Result</button>
          <button id="ec-retry" class="ec-ghost">Play Again</button>
        </div>
      </div>
    </section>

    <footer class="ec-footer">
      <button id="ec-hint" class="ec-ghost" aria-label="Get a hint (limited)">ðŸ’¡ Hint (2)</button>
      <button id="ec-sound" class="ec-ghost" aria-label="Toggle sound">ðŸ”Š Sound</button>
      <button id="ec-theme" class="ec-ghost" aria-label="Toggle theme">ðŸŒ“ Theme</button>
    </footer>
  </main>

  <script src="./script.js"></script>

  <!-- Integration snippet (link + iframe) -->
  <!--
  From your portfolio page:
  <a href="/games/escape-code/index.html">Play Escape the Code</a>
  or embed:
  <iframe src="/games/escape-code/index.html" title="Escape the Code" loading="lazy"
          style="width:100%;max-width:1024px;height:640px;border:0;border-radius:12px;"></iframe>
  -->
</body>
</html>
